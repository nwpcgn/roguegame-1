// src/lib/tiles.ts

// Wand (blaues Kachelmuster)
const roomPath1 = new Path2D(
	'M62 0L64 0L64 2L50 16L64 30L64 34L50 48L64 62L64 64L62 64L48 50L34 64L30 64L16 50L2 64L0 64L0 62L14 48L0 34L0 30L14 16L0 2L0 0L2 0L16 14L30 0L34 0L48 14L62 0L62 0ZM32 2L18 16L32 30L46 16L32 2L32 2ZM34 32L48 46L62 32L48 18L34 32L34 32ZM32 34L18 48L32 62L46 48L32 34L32 34ZM2 32L16 46L30 32L16 18L2 32L2 32Z'
)
const roomPath2 = new Path2D(
	'M2 32L16 18L30 32L16 46L2 32L2 32ZM64 2L64 30L50 16L64 2L64 2ZM64 34L64 62L50 48L64 34L64 34ZM62 64L34 64L48 50L62 64L62 64ZM30 64L2 64L16 50L30 64L30 64ZM0 62L0 34L14 48L0 62L0 62ZM0 30L0 2L14 16L0 30L0 30ZM2 0L30 0L16 14L2 0L2 0ZM34 0L62 0L48 14L34 0L34 0ZM32 2L46 16L32 30L18 16L32 2L32 2ZM34 32L48 18L62 32L48 46L34 32L34 32ZM32 34L46 48L32 62L18 48L32 34L32 34Z'
)

const rooms = [
	{
		fill: '#FFFFFF',
		opacity: 0.4,
		path: roomPath1
	},
	{
		fill: '#3498DB',
		opacity: 0.4,
		path: roomPath2
	}
]

export function drawRoom(
	ctx: CanvasRenderingContext2D,
	x: number,
	y: number,
	size: number
) {
	rooms.forEach((d) => {
		ctx.save()
		ctx.translate(x, y)
		const scale = size / 64 // SVG ist 64x64
		ctx.scale(scale, scale)
		ctx.globalAlpha = d.opacity
		ctx.fillStyle = d.fill
		ctx.fill(d.path)
		ctx.restore()
	})
}

// Boden (graue Form)
const floorPath = new Path2D(
	'M8 14L16 22L8 30L0 22L8 14L8 14ZM40 14L48 22L40 30L32 22L40 14L40 14ZM54 0L62 8L54 16L46 8L54 0L54 0ZM40 46L48 54L40 62L32 54L40 46L40 46ZM54 32L62 40L54 48L46 40L54 32L54 32ZM22 0L30 8L22 16L14 8L22 0L22 0ZM8 46L16 54L8 62L0 54L8 46L8 46ZM22 32L30 40L22 48L14 40L22 32L22 32Z'
)

export function drawFloor(
	ctx: CanvasRenderingContext2D,
	x: number,
	y: number,
	size: number
) {
	ctx.fillStyle = 'rgba(3, 3, 3, 0.7)'
	ctx.fillRect(x, y, size, size)
	ctx.save()
	ctx.translate(x, y)
	const scale = size / 64
	ctx.scale(scale, scale)

	ctx.fillStyle = 'rgba(241, 196, 15, 0.5)'
	ctx.fill(floorPath)

	ctx.restore()
}

// TÃ¼r (rote Box)
const doorPath = new Path2D(
	'M60 27C60 27 59.75 26.3 59.75 26.3C59.55 26.1 59.3 26 59 26C58.7333 26 58.5 26.1 58.3 26.3C58.1 26.5 58 26.7333 58 27C58 27.3 58.1 27.55 58.3 27.75C58.5 27.9167 58.7333 28 59 28C59 28 59.75 27.75 59.75 27.75C59.75 27.75 60 27 60 27C60 27 60 27 60 27ZM36 27C36 27 35.75 26.3 35.75 26.3C35.55 26.1 35.3 26 35 26C34.7333 26 34.5 26.1 34.3 26.3C34.1 26.5 34 26.7333 34 27C34 27.3 34.1 27.55 34.3 27.75C34.3 27.75 35 28 35 28C35 28 35.75 27.75 35.75 27.75L36 27C36 27 36 27 36 27ZM36 3C36 3 35.75 2.3 35.75 2.3C35.55 2.1 35.3 2 35 2C34.7333 2 34.5 2.1 34.3 2.3C34.1 2.5 34 2.73333 34 3C34 3.3 34.1 3.55 34.3 3.75C34.3 3.75 35 4 35 4C35 4 35.75 3.75 35.75 3.75L36 3C36 3 36 3 36 3ZM60 3C60 3 59.75 2.3 59.75 2.3C59.55 2.1 59.3 2 59 2C58.7333 2 58.5 2.1 58.3 2.3C58.1 2.5 58 2.73333 58 3C58 3.3 58.1 3.55 58.3 3.75C58.5 3.91667 58.7333 4 59 4C59 4 59.75 3.75 59.75 3.75C59.75 3.75 60 3 60 3C60 3 60 3 60 3ZM62 0C62 0 62 30 62 30L32 30L32 0L62 0C62 0 62 0 62 0ZM60 59C60 59 59.75 58.3 59.75 58.3C59.55 58.1 59.3 58 59 58C58.7333 58 58.5 58.1 58.3 58.3C58.1 58.5 58 58.7333 58 59C58 59.3 58.1 59.55 58.3 59.75C58.5 59.9167 58.7333 60 59 60C59 60 59.75 59.75 59.75 59.75C59.75 59.75 60 59 60 59C60 59 60 59 60 59ZM36 59C36 59 35.75 58.3 35.75 58.3C35.55 58.1 35.3 58 35 58C34.7333 58 34.5 58.1 34.3 58.3C34.1 58.5 34 58.7333 34 59C34 59.3 34.1 59.55 34.3 59.75C34.3 59.75 35 60 35 60C35 60 35.75 59.75 35.75 59.75L36 59C36 59 36 59 36 59ZM36 35C36 35 35.75 34.3 35.75 34.3C35.55 34.1 35.3 34 35 34C34.7333 34 34.5 34.1 34.3 34.3C34.1 34.5 34 34.7333 34 35C34 35.3 34.1 35.55 34.3 35.75C34.3 35.75 35 36 35 36C35 36 35.75 35.75 35.75 35.75L36 35C36 35 36 35 36 35ZM60 35C60 35 59.75 34.3 59.75 34.3C59.55 34.1 59.3 34 59 34C58.7333 34 58.5 34.1 58.3 34.3C58.1 34.5 58 34.7333 58 35C58 35.3 58.1 35.55 58.3 35.75C58.5 35.9167 58.7333 36 59 36C59 36 59.75 35.75 59.75 35.75C59.75 35.75 60 35 60 35C60 35 60 35 60 35ZM62 62C62 62 32 62 32 62L32 32L62 32L62 62C62 62 62 62 62 62ZM28 27C28 27 27.75 26.3 27.75 26.3C27.55 26.1 27.3 26 27 26C26.7333 26 26.5 26.1 26.3 26.3C26.1 26.5 26 26.7333 26 27C26 27.3 26.1 27.55 26.3 27.75C26.3 27.75 27 28 27 28C27 28 27.75 27.75 27.75 27.75L28 27C28 27 28 27 28 27ZM4 27C4 27 3.75 26.3 3.75 26.3C3.55 26.1 3.3 26 3 26C2.73333 26 2.5 26.1 2.3 26.3C2.1 26.5 2 26.7333 2 27C2 27.3 2.1 27.55 2.3 27.75C2.5 27.9167 2.73333 28 3 28C3 28 3.75 27.75 3.75 27.75C3.75 27.75 4 27 4 27C4 27 4 27 4 27ZM4 3C4 3 3.75 2.3 3.75 2.3C3.55 2.1 3.3 2 3 2C2.73333 2 2.5 2.1 2.3 2.3C2.1 2.5 2 2.73333 2 3C2 3.3 2.1 3.55 2.3 3.75C2.5 3.91667 2.73333 4 3 4C3 4 3.75 3.75 3.75 3.75C3.75 3.75 4 3 4 3C4 3 4 3 4 3ZM28 3C28 3 27.75 2.3 27.75 2.3C27.55 2.1 27.3 2 27 2C26.7333 2 26.5 2.1 26.3 2.3C26.1 2.5 26 2.73333 26 3C26 3.3 26.1 3.55 26.3 3.75C26.3 3.75 27 4 27 4C27 4 27.75 3.75 27.75 3.75L28 3C28 3 28 3 28 3ZM0 0C0 0 30 0 30 0L30 30L0 30L0 0C0 0 0 0 0 0ZM28 59C28 59 27.75 58.3 27.75 58.3C27.55 58.1 27.3 58 27 58C26.7333 58 26.5 58.1 26.3 58.3C26.1 58.5 26 58.7333 26 59C26 59.3 26.1 59.55 26.3 59.75C26.3 59.75 27 60 27 60C27 60 27.75 59.75 27.75 59.75L28 59C28 59 28 59 28 59ZM4 59C4 59 3.75 58.3 3.75 58.3C3.55 58.1 3.3 58 3 58C2.73333 58 2.5 58.1 2.3 58.3C2.1 58.5 2 58.7333 2 59C2 59.3 2.1 59.55 2.3 59.75C2.5 59.9167 2.73333 60 3 60C3 60 3.75 59.75 3.75 59.75C3.75 59.75 4 59 4 59C4 59 4 59 4 59ZM4 35C4 35 3.75 34.3 3.75 34.3C3.55 34.1 3.3 34 3 34C2.73333 34 2.5 34.1 2.3 34.3C2.1 34.5 2 34.7333 2 35C2 35.3 2.1 35.55 2.3 35.75C2.5 35.9167 2.73333 36 3 36C3 36 3.75 35.75 3.75 35.75C3.75 35.75 4 35 4 35C4 35 4 35 4 35ZM28 35C28 35 27.75 34.3 27.75 34.3C27.55 34.1 27.3 34 27 34C26.7333 34 26.5 34.1 26.3 34.3C26.1 34.5 26 34.7333 26 35C26 35.3 26.1 35.55 26.3 35.75C26.3 35.75 27 36 27 36C27 36 27.75 35.75 27.75 35.75L28 35C28 35 28 35 28 35ZM0 62C0 62 0 32 0 32L30 32L30 62L0 62C0 62 0 62 0 62Z'
)

export function drawDoor(
	ctx: CanvasRenderingContext2D,
	x: number,
	y: number,
	size: number
) {
	ctx.fillStyle = 'rgba(3, 3, 3, 1)'
	ctx.fillRect(x, y, size, size)
	ctx.save()
	ctx.translate(x, y)
	const scale = size / 64
	ctx.scale(scale, scale)

	ctx.fillStyle = '#e74c3c'
	ctx.fill(doorPath)

	ctx.restore()
}

const playerPath = new Path2D(
	'M2.00488 19H22.0049V21H2.00488V19ZM2.00488 5L7.00488 8L12.0049 2L17.0049 8L22.0049 5V17H2.00488V5Z'
)
export function drawPlayer(
	ctx: CanvasRenderingContext2D,
	x: number,
	y: number,
	size: number
) {
	ctx.save()
	ctx.translate(x, y)
	const scale = size / 24
	ctx.scale(scale, scale)

	ctx.fillStyle = '#f39c12'
	ctx.fill(playerPath)

	ctx.restore()
}
export function drawWall(
	ctx: CanvasRenderingContext2D,
	x: number,
	y: number,
	size: number
) {
	// Hintergrund
	ctx.fillStyle = 'rgba(3, 3, 3, 0.7)'
	ctx.fillRect(x, y, size, size)

	ctx.font = `${size * 0.5}px 'Fira Code', monospace`
	ctx.textAlign = 'center'
	ctx.textBaseline = 'middle'
	ctx.fillStyle = 'rgba(255,255,255,0.5)'
	ctx.fillText('#', x + size / 2, y + size / 2)
}
